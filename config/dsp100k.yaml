# DSP-100K Configuration
# Diversified Systematic Portfolio - $100K Target Capital
# Per SPEC_DSP_100K.md

# IBKR Connection Settings
ibkr:
  host: "127.0.0.1"
  port: 7497  # Paper trading port (7496 for Gateway)
  client_id: 100
  timeout: 30
  readonly: false

# Risk Management Configuration
risk:
  # Volatility targeting
  vol_target: 0.07        # 7% portfolio volatility target
  vol_cap: 0.08           # 8% hard cap
  sleeve_a_vol_target: 0.05  # 5% for equity L/S
  sleeve_b_vol_target: 0.035 # 3.5% for cross-asset trend

  # Drawdown controls
  dd_warning: 0.06        # 6% drawdown warning
  dd_hard_stop: 0.10      # 10% hard stop - liquidate to cash

  # Margin controls
  margin_cap: 0.60        # 60% margin utilization cap

  # Concentration limits
  single_name_cap: 0.15   # 15% max per position

# Sleeve A Configuration (Equity L/S - Disabled for Phase 1)
sleeve_a:
  enabled: false
  allocation: 0.30        # 30% NAV target
  vol_target: 0.05        # 5% volatility
  long_count: 6           # Top 6 momentum longs
  short_count: 6          # Bottom 6 momentum shorts
  rebalance_frequency: "weekly"  # Every Friday
  sector_cap: 0.30        # 30% max per sector

# Sleeve B Configuration (Cross-Asset Trend)
sleeve_b:
  enabled: true
  allocation: 0.30        # 30% NAV target
  vol_target: 0.035       # 3.5% volatility target
  single_name_cap: 0.15   # 15% max per ETF

  # Trend signal weights
  signal_weights:
    1m: 0.25              # 1-month return (25%)
    3m: 0.50              # 3-month return (50%)
    12m_skip: 0.25        # 12-month return skip most recent month (25%)

  # Universe - non-equity ETFs only
  universe:
    # Bonds
    - TLT   # 20+ Year Treasury
    - IEF   # 7-10 Year Treasury
    - LQD   # Investment Grade Corporate
    - HYG   # High Yield Corporate
    - EMB   # Emerging Markets Bonds
    - TIP   # TIPS

    # Commodities
    - GLD   # Gold
    - SLV   # Silver
    - USO   # Oil
    - UNG   # Natural Gas
    - DBA   # Agriculture
    - DBB   # Base Metals

    # Real Assets
    - VNQ   # Real Estate
    - VNQI  # International Real Estate

    # Currencies
    - UUP   # US Dollar
    - FXE   # Euro
    - FXY   # Yen
    - FXB   # British Pound

    # Volatility
    - VIXY  # VIX Short-Term

# Sleeve C Configuration (Put Spread Hedge)
sleeve_c:
  enabled: true
  annual_budget_pct: 0.0125  # 1.25% annual budget for hedges

  # Spread structure
  long_put_delta: -0.25   # 25-delta long put
  short_put_delta: -0.10  # 10-delta short put

  # Expiration targeting
  target_dte_min: 30      # Minimum 30 DTE
  target_dte_max: 45      # Maximum 45 DTE
  roll_trigger_dte: 10    # Roll when DTE < 10

  # Underlying
  underlying: "SPY"

  # Maximum spread count
  max_spreads: 5

# Execution Configuration
execution:
  # Execution window (ET)
  window_start: "09:35"
  window_end: "10:15"

  # Order settings
  limit_buffer_bps: 10    # 10 bps buffer for marketable limits
  max_wait_seconds: 300   # 5 minute max wait per order
  retry_attempts: 3
  retry_delay_seconds: 5

  # Batch settings
  batch_delay_seconds: 2  # Delay between orders in batch

# Data Configuration
data:
  # Cache settings
  cache_dir: "data/cache"
  cache_ttl_hours: 24

  # Validation settings
  min_history_days: 252   # 1 year minimum
  max_gap_days: 5

  # Data sources
  primary_source: "IBKR"

# Logging Configuration
logging:
  level: "INFO"
  format: "json"
  audit_dir: "logs/audit"
  trade_log_dir: "logs/trades"

# Schedule Configuration
schedule:
  # Daily execution time (ET)
  daily_run_time: "09:30"

  # Weekend handling
  skip_weekends: true
  skip_holidays: true

  # Calendar
  exchange: "NYSE"
